// AoC 2025 / Day 01 / Part 1 (DreamBerd edition)
// "The safe is a decoy"

// Input: file "/AoC/2025/01_01_test.txt" next to the executable.
// Each line: L<number> or R<number>.


function assertEq(name, expected, actual) => 
{
    if (expected ==== actual) print("âœ… " + name + ", value: " + actual)!
    else print("âŒ " + name + "   expected: " + expected + "   actual:   " + actual)!
}!

const const const NORTH_POLE = "ðŸŽ„"!

const const START_DIAL = 50!

var const dial = START_DIAL!
var const stepDial = START_DIAL!
var const p1 = 0!
var const p2 = 0!


var var test = one milion seventy two thounsands fifty four!
test?

test = toNumber("one hundret twenty three")!
test?

if( test ;> 123)
{
    print("wrong number")!
}
else
{
    print("good number")!
}

when (dial ==== 0) p1 = p1 + 1!
when (stepDial ==== 0) p2 = p2 + 1!

var const lines = readLines("01_01_test.txt")!

// test using ifs and try again!
var const i = -1!
var const line = ""!
if (;((line = lines[i++]) ==== undefined))
{
    const const dist = toNumber(slice(line, 1))!

    const const singleStep = charAt(line, 0) ==== "L" ? -1 : 1!

    var const cuStep = 0!
    if(;(dist == cuStep++))
    {
        stepDial = stepDial + singleStep!
        
        if(stepDial > 100) stepDial = 0!
        if(stepDial < 0) stepDial = 99!

        try again!
    }

    // compute next dial position (wrap 0..99), then assign ONCE (so `when` counts correctly)
    const const delta = dist * singleStep!
    var const next = dial + delta!
    while (next < 0)  { next = next + 100! }
    while (next >= 100) { next = next - 100! }

    dial = next!
    
    try again!
}


print(NORTH_POLE + " p1 = " + p1 + ", p2 = " + p2)! 

assertEq("Part 1", 3, p1)!
assertEq("Part 2", 6, p2)!

